<?xml version="1.0" encoding="UTF-8"?><record_update table="wf_workflow_version">
    <wf_workflow_version action="INSERT_OR_UPDATE">
        <active>true</active>
        <activity_stages>{"subflows":[],"stages":{},"activities":{},"ends":["5f7696231b78fcd0e314c955624bcbcd"]}</activity_stages>
        <after_business_rules>false</after_business_rules>
        <checked_out/>
        <checked_out_by/>
        <column_renderer display_value="Workflow-driven">a56213111b030100adca1e094f0713ac</column_renderer>
        <condition/>
        <condition_type>run_match</condition_type>
        <description>workflow collects certificates from configured Certificate Authority Stores and inserts or updates the data in the certificate table</description>
        <expected_sequences>537696231b78fcd0e314c955624bcbd2,df7696231b78fcd0e314c955624bcbce,5f7616231b78fcd0e314c955624bcb73,177616231b78fcd0e314c955624bcb76,1f7616231b78fcd0e314c955624bcb77,937696231b78fcd0e314c955624bcbd0</expected_sequences>
        <expected_time>1970-01-01 14:00:00</expected_time>
        <expected_time_type/>
        <full_sequences>537696231b78fcd0e314c955624bcbd2,df7696231b78fcd0e314c955624bcbce,5f7616231b78fcd0e314c955624bcb73,177616231b78fcd0e314c955624bcb76,1f7616231b78fcd0e314c955624bcb77,977616231b78fcd0e314c955624bcb71,937696231b78fcd0e314c955624bcbd0,df7616231b78fcd0e314c955624bcb74,5f7696231b78fcd0e314c955624bcbcd</full_sequences>
        <journal/>
        <max_activity_count>100</max_activity_count>
        <name>wf_syncCredentialStore</name>
        <not_cacheable>false</not_cacheable>
        <on_cancel><![CDATA[// This script executes if the workflow is cancelled.// The global variable context_sys_id contains the sys_id of the cancelled workflow context.]]></on_cancel>
        <order>100</order>
        <pin_type>set_by_activity</pin_type>
        <published>true</published>
        <relative_duration/>
        <requires_ert>true</requires_ert>
        <run_multiple>false</run_multiple>
        <schedule/>
        <stage_field/>
        <stage_order>computed</stage_order>
        <start display_value="Begin">537696231b78fcd0e314c955624bcbd2</start>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:13</sys_created_on>
        <sys_id>5b7616231b78fcd0e314c955624bcb6e</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:21:11</sys_updated_on>
        <table>global</table>
        <timezone/>
        <validated>false</validated>
        <workflow display_value="wf_syncCredentialStore">7c1b10aedb587b00d3e954f948961938</workflow>
    </wf_workflow_version>
    <wf_workflow action="INSERT_OR_UPDATE">
        <access>public</access>
        <description>workflow collects certificates from configured Certificate Authority Stores and inserts or updates the data in the certificate table</description>
        <name>wf_syncCredentialStore</name>
        <preview/>
        <sys_class_name>wf_workflow</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2019-03-22 21:26:05</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_domain>global</sys_domain>
        <sys_id>7c1b10aedb587b00d3e954f948961938</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>wf_syncCredentialStore</sys_name>
        <sys_overrides/>
        <sys_package display_value="Certificate Management" source="x_unugr_certificat">2c9bb9a3db8cbf40d3e954f9489619dd</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Certificate Management">2c9bb9a3db8cbf40d3e954f9489619dd</sys_scope>
        <sys_update_name>wf_workflow_7c1b10aedb587b00d3e954f948961938</sys_update_name>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2019-03-22 21:26:05</sys_updated_on>
        <table>global</table>
        <template>false</template>
        <vars/>
    </wf_workflow>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Begin">c7a5e32c0a0a0b3a002377c24ed8ea76</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>1</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>Begin</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537696231b78fcd0e314c955624bcbd2</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>20</x>
        <y>20</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=537696231b78fcd0e314c955624bcbd2"/>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Begin">537696231b78fcd0e314c955624bcbd2</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7696231b78fcd0e314c955624bcbd2</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="If">98f621ca0a0a0b5900f7c291f5e45a0e</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>7</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Check Counter Value</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>937696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>763</x>
        <y>491</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=937696231b78fcd0e314c955624bcbd0"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>1b7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value/>
        <variable display_value="Condition">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9f7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>answer = checkCounter();&#13;
&#13;
function checkCounter() {&#13;
	&#13;
	var check = 'no';&#13;
	workflow.scratchpad.counter++; &#13;
	if (workflow.scratchpad.counter &lt; workflow.scratchpad.count) {&#13;
		check = 'yes';&#13;
	}&#13;
&#13;
	return check;	&#13;
}</value>
        <variable display_value="Script">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>db7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>1</value>
        <variable display_value="Advanced">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>100</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>1b7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value/>
        <variable display_value="Condition">493cba6a0a6a803f07df24b118473551</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>200</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>db7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>1</value>
        <variable display_value="Advanced">493d2c1d0a6a803f3217a75738ea3289</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>937696231b78fcd0e314c955624bcbd0</document_key>
        <order>300</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9f7696231b78fcd0e314c955624bcbd0</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>answer = checkCounter();&#13;
&#13;
function checkCounter() {&#13;
	&#13;
	var check = 'no';&#13;
	workflow.scratchpad.counter++; &#13;
	if (workflow.scratchpad.counter &lt; workflow.scratchpad.count) {&#13;
		check = 'yes';&#13;
	}&#13;
&#13;
	return check;	&#13;
}</value>
        <variable display_value="Script">c35e50810a0a0ba96248a709b450fc32</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</activity>
        <condition>activity.result == 'no'</condition>
        <condition_default display_value="No">c1eff6430a0a0b59000f955abe842c94</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>No</name>
        <order>200</order>
        <short_description/>
        <skip_during_generate>true</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>db7696231b78fcd0e314c955624bcbd1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</activity>
        <condition>activity.result == 'yes'</condition>
        <condition_default display_value="Yes">c1ef63200a0a0b59005ef89bae78feb7</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Yes</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>5b7696231b78fcd0e314c955624bcbd1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="End">c7a66f7d0a0a0b3a004544a6d2f14076</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>2</databus_lookup_id>
        <height/>
        <input/>
        <is_parent>false</is_parent>
        <name>End</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>5f7696231b78fcd0e314c955624bcbcd</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width>80</width>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>1328</x>
        <y>319</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=5f7696231b78fcd0e314c955624bcbcd"/>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="CM_getCACertificates">148a8b08dbffb7c04ff2c553059619da</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>13</databus_lookup_id>
        <height/>
        <input>{"certificateServer":"${workflow.scratchpad.currentServerName}","certificateServerDomain":"${workflow.scratchpad.currentServerDomain}","certificateStoreName":"${workflow.scratchpad.currentAuthorityName}","requestSubmissionDays":"${workflow.scratchpad.ignoreExpiredDays}","userDomain":"${workflow.scratchpad.currentUserDomain}","userName":"${workflow.scratchpad.currentUserName}","userPass":"${workflow.scratchpad.currentPassword}","hostName":"${workflow.scratchpad.currenthostName }","midCapability":"${workflow.scratchpad.currentCapabilityName}"}</input>
        <is_parent>false</is_parent>
        <name>get Certificates from Certificate Store</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>177616231b78fcd0e314c955624bcb76</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>222</x>
        <y>453</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=177616231b78fcd0e314c955624bcb76"/>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="get Certificates from Certificate Store">177616231b78fcd0e314c955624bcb76</activity>
        <condition/>
        <condition_default display_value="Failure">927ae032db65f7004ff2c55305961974</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>true</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Failure</name>
        <order>200</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d37616231b78fcd0e314c955624bcb77</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="get Certificates from Certificate Store">177616231b78fcd0e314c955624bcb76</activity>
        <condition>activityOutput.result == "success"</condition>
        <condition_default display_value="Success">da7ae032db65f7004ff2c55305961974</condition_default>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>false</is_positive>
        <name>Success</name>
        <order>100</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>577616231b78fcd0e314c955624bcb77</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>3</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Initialize WorkFlow</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7696231b78fcd0e314c955624bcbce</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>132</x>
        <y>139</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=df7696231b78fcd0e314c955624bcbce"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>df7696231b78fcd0e314c955624bcbce</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537696231b78fcd0e314c955624bcbcf</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
&#13;
var authorityServerRecords = new GlideRecord('x_unugr_certificat_authority_servers');&#13;
&#13;
authorityServerRecords.addQuery('u_active',true);&#13;
authorityServerRecords.orderBy('u_server_domain');&#13;
authorityServerRecords.query();&#13;
&#13;
var authorityServer = {};&#13;
var authorityServerList = [];&#13;
&#13;
while(authorityServerRecords.next()){&#13;
	authorityServer = {};&#13;
	authorityServer.sys_id = authorityServerRecords.sys_id + '';&#13;
	authorityServer.serverName = authorityServerRecords.u_server_name+ '';&#13;
	authorityServer.serverDomain = authorityServerRecords.u_server_domain + '';&#13;
	authorityServer.authorityName = authorityServerRecords.u_certificate_authority_name + '';&#13;
	authorityServer.userName = authorityServerRecords.u_credential.user_name + '';&#13;
	authorityServer.password = authorityServerRecords.u_credential.password + '';&#13;
	&#13;
	authorityServerList.push(authorityServer);&#13;
}&#13;
&#13;
workflow.scratchpad.count = authorityServerList.length;&#13;
workflow.scratchpad.counter = 0;&#13;
workflow.scratchpad.authorityServerList = authorityServerList;&#13;
workflow.scratchpad.message='';&#13;
&#13;
//get expiration days cutoff property&#13;
workflow.scratchpad.ignoreExpiredDays = parseInt(gs.getProperty('x_unugr_certificat.importscan.ignoreExpiredDays'));&#13;
&#13;
gs.info('---&gt; [WF:{1}] Total number of records to loop: {0}', workflow.scratchpad.count, identifier);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>df7696231b78fcd0e314c955624bcbce</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537696231b78fcd0e314c955624bcbcf</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
&#13;
var authorityServerRecords = new GlideRecord('x_unugr_certificat_authority_servers');&#13;
&#13;
authorityServerRecords.addQuery('u_active',true);&#13;
authorityServerRecords.orderBy('u_server_domain');&#13;
authorityServerRecords.query();&#13;
&#13;
var authorityServer = {};&#13;
var authorityServerList = [];&#13;
&#13;
while(authorityServerRecords.next()){&#13;
	authorityServer = {};&#13;
	authorityServer.sys_id = authorityServerRecords.sys_id + '';&#13;
	authorityServer.serverName = authorityServerRecords.u_server_name+ '';&#13;
	authorityServer.serverDomain = authorityServerRecords.u_server_domain + '';&#13;
	authorityServer.authorityName = authorityServerRecords.u_certificate_authority_name + '';&#13;
	authorityServer.userName = authorityServerRecords.u_credential.user_name + '';&#13;
	authorityServer.password = authorityServerRecords.u_credential.password + '';&#13;
	&#13;
	authorityServerList.push(authorityServer);&#13;
}&#13;
&#13;
workflow.scratchpad.count = authorityServerList.length;&#13;
workflow.scratchpad.counter = 0;&#13;
workflow.scratchpad.authorityServerList = authorityServerList;&#13;
workflow.scratchpad.message='';&#13;
&#13;
//get expiration days cutoff property&#13;
workflow.scratchpad.ignoreExpiredDays = parseInt(gs.getProperty('x_unugr_certificat.importscan.ignoreExpiredDays'));&#13;
&#13;
gs.info('---&gt; [WF:{1}] Total number of records to loop: {0}', workflow.scratchpad.count, identifier);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Initialize WorkFlow">df7696231b78fcd0e314c955624bcbce</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9b7696231b78fcd0e314c955624bcbcf</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>12</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Log Failure</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>977616231b78fcd0e314c955624bcb71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>444</x>
        <y>720</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=977616231b78fcd0e314c955624bcb71"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>977616231b78fcd0e314c955624bcb71</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
&#13;
importLogRecord.addQuery('sys_id', '=', workflow.scratchpad.currentLogRecord);&#13;
importLogRecord.query();&#13;
&#13;
while (importLogRecord.next()) {&#13;
	importLogRecord.u_status = 'Failure';&#13;
	importLogRecord.u_status_description = data.get(13).errorMessage;&#13;
	importLogRecord.update();	&#13;
}&#13;
&#13;
//Write also to the application Log&#13;
gs.info('Get Certificates from Certificate Store Failed for Server: {0} . Reason: {1}',workflow.scratchpad.currentServerName, data.get(13).errorMessage);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>977616231b78fcd0e314c955624bcb71</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb71</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
&#13;
importLogRecord.addQuery('sys_id', '=', workflow.scratchpad.currentLogRecord);&#13;
importLogRecord.query();&#13;
&#13;
while (importLogRecord.next()) {&#13;
	importLogRecord.u_status = 'Failure';&#13;
	importLogRecord.u_status_description = data.get(13).errorMessage;&#13;
	importLogRecord.update();	&#13;
}&#13;
&#13;
//Write also to the application Log&#13;
gs.info('Get Certificates from Certificate Store Failed for Server: {0} . Reason: {1}',workflow.scratchpad.currentServerName, data.get(13).errorMessage);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Log Failure">977616231b78fcd0e314c955624bcb71</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>937616231b78fcd0e314c955624bcb73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>4</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Log Import and Assign Current Vars</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>5f7616231b78fcd0e314c955624bcb73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>177</x>
        <y>260</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=5f7616231b78fcd0e314c955624bcb73"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>5f7616231b78fcd0e314c955624bcb73</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
var midCapabilityName = null;&#13;
// var midCapabilitySysId = null;&#13;
&#13;
workflow.scratchpad.currentLogRecord = null;&#13;
workflow.scratchpad.currentServerName = null;&#13;
workflow.scratchpad.currentServerDomain = null ;&#13;
workflow.scratchpad.currentAuthorityName = null;&#13;
workflow.scratchpad.currenthostName = null;&#13;
&#13;
var authorityServer = workflow.scratchpad.authorityServerList[workflow.scratchpad.counter];&#13;
&#13;
workflow.scratchpad.message += '[' + workflow.scratchpad.counter + ']'&#13;
	+ 'Server: ' + authorityServer.serverName&#13;
	+ ' Server Domain: ' + authorityServer.serverDomain&#13;
	+ ' Cert Authority Name: ' + authorityServer.authorityName&#13;
	+ '\n';&#13;
&#13;
var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
importLogRecord.initialize();&#13;
importLogRecord.u_store_server = authorityServer.sys_id;&#13;
importLogRecord.u_store_domain = authorityServer.serverDomain;&#13;
importLogRecord.u_store_name = authorityServer.authorityName;&#13;
importLogRecord.u_status = 'Processing';&#13;
&#13;
var logSysID = importLogRecord.insert();&#13;
&#13;
workflow.scratchpad.currenthostName = authorityServer.serverName + '.' + authorityServer.serverDomain;&#13;
&#13;
workflow.scratchpad.currentLogRecord = logSysID;&#13;
workflow.scratchpad.currentServerSysID = authorityServer.sys_id;&#13;
workflow.scratchpad.currentServerName = authorityServer.serverName;&#13;
workflow.scratchpad.currentServerDomain = authorityServer.serverDomain;&#13;
workflow.scratchpad.currentAuthorityName = authorityServer.authorityName;&#13;
workflow.scratchpad.currentUserDomain = ((authorityServer.userName).split('\\'))[0];&#13;
workflow.scratchpad.currentUserName = ((authorityServer.userName).split('\\'))[1];&#13;
workflow.scratchpad.currentPassword = authorityServer.password;&#13;
&#13;
&#13;
if(authorityServer.serverDomain == 'UP.DEV.UPC') {&#13;
	midCapabilityName = 'Powershell_CM_DEV';&#13;
} else if(authorityServer.serverDomain == 'UP.ACPT.UPC'){&#13;
	midCapabilityName = 'Powershell_CM_ACPT';&#13;
} else {&#13;
	midCapabilityName = 'Powershell_CM_PROD';&#13;
}&#13;
&#13;
workflow.scratchpad.currentCapabilityName = midCapabilityName;&#13;
// &#13;
gs.info('---&gt; [WF:{2}]\nLoop Count: {0} - Message so far:\n{1}', workflow.scratchpad.counter, workflow.scratchpad.message, identifier);&#13;
</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>5f7616231b78fcd0e314c955624bcb73</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb73</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
var midCapabilityName = null;&#13;
// var midCapabilitySysId = null;&#13;
&#13;
workflow.scratchpad.currentLogRecord = null;&#13;
workflow.scratchpad.currentServerName = null;&#13;
workflow.scratchpad.currentServerDomain = null ;&#13;
workflow.scratchpad.currentAuthorityName = null;&#13;
workflow.scratchpad.currenthostName = null;&#13;
&#13;
var authorityServer = workflow.scratchpad.authorityServerList[workflow.scratchpad.counter];&#13;
&#13;
workflow.scratchpad.message += '[' + workflow.scratchpad.counter + ']'&#13;
	+ 'Server: ' + authorityServer.serverName&#13;
	+ ' Server Domain: ' + authorityServer.serverDomain&#13;
	+ ' Cert Authority Name: ' + authorityServer.authorityName&#13;
	+ '\n';&#13;
&#13;
var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
importLogRecord.initialize();&#13;
importLogRecord.u_store_server = authorityServer.sys_id;&#13;
importLogRecord.u_store_domain = authorityServer.serverDomain;&#13;
importLogRecord.u_store_name = authorityServer.authorityName;&#13;
importLogRecord.u_status = 'Processing';&#13;
&#13;
var logSysID = importLogRecord.insert();&#13;
&#13;
workflow.scratchpad.currenthostName = authorityServer.serverName + '.' + authorityServer.serverDomain;&#13;
&#13;
workflow.scratchpad.currentLogRecord = logSysID;&#13;
workflow.scratchpad.currentServerSysID = authorityServer.sys_id;&#13;
workflow.scratchpad.currentServerName = authorityServer.serverName;&#13;
workflow.scratchpad.currentServerDomain = authorityServer.serverDomain;&#13;
workflow.scratchpad.currentAuthorityName = authorityServer.authorityName;&#13;
workflow.scratchpad.currentUserDomain = ((authorityServer.userName).split('\\'))[0];&#13;
workflow.scratchpad.currentUserName = ((authorityServer.userName).split('\\'))[1];&#13;
workflow.scratchpad.currentPassword = authorityServer.password;&#13;
&#13;
&#13;
if(authorityServer.serverDomain == 'UP.DEV.UPC') {&#13;
	midCapabilityName = 'Powershell_CM_DEV';&#13;
} else if(authorityServer.serverDomain == 'UP.ACPT.UPC'){&#13;
	midCapabilityName = 'Powershell_CM_ACPT';&#13;
} else {&#13;
	midCapabilityName = 'Powershell_CM_PROD';&#13;
}&#13;
&#13;
workflow.scratchpad.currentCapabilityName = midCapabilityName;&#13;
// &#13;
gs.info('---&gt; [WF:{2}]\nLoop Count: {0} - Message so far:\n{1}', workflow.scratchpad.counter, workflow.scratchpad.message, identifier);&#13;
</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Log Import and Assign Current Vars">5f7616231b78fcd0e314c955624bcb73</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>1b7616231b78fcd0e314c955624bcb74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>8</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Log Message</name>
        <new_activity_definition/>
        <notes/>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>false</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb74</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>927</x>
        <y>697</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=df7616231b78fcd0e314c955624bcb74"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>df7616231b78fcd0e314c955624bcb74</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537616231b78fcd0e314c955624bcb75</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
&#13;
gs.info('---&gt; [WF:{1}]\nFINAL Message:\n{0}', workflow.scratchpad.message, identifier);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>df7616231b78fcd0e314c955624bcb74</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537616231b78fcd0e314c955624bcb75</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <value>var identifier = context.name + '.' + activity.name;&#13;
&#13;
gs.info('---&gt; [WF:{1}]\nFINAL Message:\n{0}', workflow.scratchpad.message, identifier);</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Log Message">df7616231b78fcd0e314c955624bcb74</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9b7616231b78fcd0e314c955624bcb75</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_activity action="INSERT_OR_UPDATE">
        <activity_definition display_value="Run Script">db8c65aec0a8016501d00259bc7203a4</activity_definition>
        <activity_definition_updated>false</activity_definition_updated>
        <databus_lookup_id>11</databus_lookup_id>
        <height/>
        <input>{}</input>
        <is_parent>false</is_parent>
        <name>Synchronize Certificates to Certificate Table</name>
        <new_activity_definition/>
        <notes>Pin at activity level</notes>
        <out_of_date>false</out_of_date>
        <parent/>
        <pinned>true</pinned>
        <pinned_version/>
        <stage/>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>1f7616231b78fcd0e314c955624bcb77</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:20:35</sys_updated_on>
        <timeout>1970-01-01 00:00:00</timeout>
        <vars/>
        <width/>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
        <x>618</x>
        <y>359</y>
    </wf_activity>
    <sys_variable_value action="delete_multiple" query="document_key=1f7616231b78fcd0e314c955624bcb77"/>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>1f7616231b78fcd0e314c955624bcb77</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9f7616231b78fcd0e314c955624bcb77</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:20:35</sys_updated_on>
        <value>var errorMessage = '';&#13;
var errorOccured = false;&#13;
var processStatus = 'Success';&#13;
var certificateCount = 0;&#13;
var updateCount = 0;&#13;
var insertCount = 0;&#13;
var ignoreCount = 0;&#13;
var doUpdate = false;&#13;
var expiresDiff = new GlideDuration();&#13;
var debugOutput = false;&#13;
&#13;
&#13;
try {&#13;
	var jsonData = data.get(13).certificates;&#13;
	&#13;
// 	var parser = new global.JSONParser();&#13;
&#13;
// 	var parsedData = parser.parse(jsonData);&#13;
	&#13;
	var parsedData = JSON.parse(jsonData);&#13;
	&#13;
	// workflow.scratchpad.userdata = JSON.stringify(parsedData);&#13;
	&#13;
	var certificates = parsedData.certificates;&#13;
	certificateCount = certificates.length;&#13;
	&#13;
	if(debugOutput) {&#13;
		workflow.info(certificates.length);&#13;
	}&#13;
	&#13;
	&#13;
	for (i=0;i &lt; certificates.length;i++){&#13;
		&#13;
		var certificateExpirationEpochDate = (certificates[i]['Certificate Expiration Date']).replace('/Date(','').replace(')/','');&#13;
		var certificateEffectiveEpochDate = (certificates[i]['Certificate Effective Date']).replace('/Date(','').replace(')/','');&#13;
		&#13;
		var gExpirationDate = new GlideDateTime();&#13;
		gExpirationDate.subtract(gExpirationDate.getNumericValue());&#13;
		gExpirationDate.add(certificateExpirationEpochDate);&#13;
		&#13;
		var gEffectiveDate = new GlideDateTime();&#13;
		gEffectiveDate.subtract(gEffectiveDate.getNumericValue());&#13;
		gEffectiveDate.add(certificateEffectiveEpochDate);&#13;
		&#13;
		&#13;
		var certificateRecord = new GlideRecord('x_unugr_certificat_digital_certificate');&#13;
		certificateRecord.addQuery('u_store_location','=',workflow.scratchpad.currentServerSysID);&#13;
		certificateRecord.addQuery('u_serial_number','=',certificates[i]['Serial Number']);&#13;
		&#13;
		certificateRecord.query();&#13;
		&#13;
		if(!certificateRecord.next()){&#13;
			certificateRecord.initialize();&#13;
			certificateRecord.u_store_location = workflow.scratchpad.currentServerSysID;&#13;
			certificateRecord.u_issuer = workflow.scratchpad.currentAuthorityName;&#13;
			certificateRecord.u_certificate = certificates[i]['Binary Certificate'];&#13;
			certificateRecord.u_common_name = certificates[i]['Issued Common Name'];&#13;
			certificateRecord.u_expires = gExpirationDate;&#13;
			certificateRecord.u_certificate_template = certificates[i]['CertificateTemplateName'];&#13;
			certificateRecord.u_sans = certificates[i]['DNSSubjectAlternativeNames'];&#13;
			certificateRecord.u_serial_number = certificates[i]['Serial Number'];&#13;
			certificateRecord.u_certificate_effective_date = gEffectiveDate;&#13;
			certificateRecord.u_requester_name = certificates[i]['Requester Name'];&#13;
			certificateRecord.u_subject = certificates[i]['Subject'];&#13;
			certificateRecord.u_signature_algorithm = certificates[i]['SignatureAlgorithm'];&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.DEV.UPC'){&#13;
				certificateRecord.u_environment = 'DEV';&#13;
			}&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.ACPT.UPC'){&#13;
				certificateRecord.u_environment = 'UAT';&#13;
			}			&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.CORP.UPC'){&#13;
				certificateRecord.u_environment = 'PRODUCTION';&#13;
			}	&#13;
			certificateRecord.insert();&#13;
			&#13;
			insertCount += 1;&#13;
		} else {&#13;
			if(!compareValues(certificateRecord.u_certificate,certificates[i]['Binary Certificate'],'Binary Certificate',debugOutput)) {&#13;
				certificateRecord.u_certificate = certificates[i]['Binary Certificate'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_sans,certificates[i]['DNSSubjectAlternativeNames'],'Sans',debugOutput)) {&#13;
				certificateRecord.u_sans = certificates[i]['DNSSubjectAlternativeNames'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_expires.getDisplayValue(),gExpirationDate.getDisplayValue(),'Expires',debugOutput)) {&#13;
				certificateRecord.u_expires.setDisplayValue(gExpirationDate.getDisplayValue());&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_certificate_template,certificates[i]['CertificateTemplateName'],'Certificate Template',debugOutput)) {&#13;
				certificateRecord.u_certificate_template = certificates[i]['CertificateTemplateName'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_certificate_effective_date.getDisplayValue(), gEffectiveDate.getDisplayValue(),'Effective Date',debugOutput)) {&#13;
				certificateRecord.u_certificate_effective_date.setDisplayValue(gEffectiveDate.getDisplayValue());&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_issuer,workflow.scratchpad.currentAuthorityName,'Issuer',debugOutput)){&#13;
				certificateRecord.u_issuer = workflow.scratchpad.currentAuthorityName;&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_requester_name,certificates[i]['Requester Name'],'Requester Name',debugOutput)){&#13;
				certificateRecord.u_requester_name = certificates[i]['Requester Name'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_subject,certificates[i]['Subject'],'Subject',debugOutput)){&#13;
				certificateRecord.u_subject = certificates[i]['Subject'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_signature_algorithm,certificates[i]['SignatureAlgorithm'],'SignatureAlgorithm',debugOutput)){&#13;
				certificateRecord.u_signature_algorithm = certificates[i]['SignatureAlgorithm'];&#13;
				doUpdate = true;&#13;
			}&#13;
&#13;
			if(doUpdate){&#13;
				certificateRecord.update();&#13;
				doUpdate = false;&#13;
				updateCount += 1;&#13;
			} else {&#13;
				ignoreCount += 1;&#13;
			}&#13;
		}&#13;
		&#13;
	}&#13;
} catch(e) {&#13;
	errorOccured = true;&#13;
	processStatus = 'Failure';&#13;
	if(/null/.test(e.message)){//Error Message is null&#13;
		errorMessage = 'Error Occured while parsing certificate data for ' + workflow.scratchpad.currentServerName;&#13;
		&#13;
	} else {&#13;
		errorMessage = 'Error Occured while parsing certificate data for ' + workflow.scratchpad.currentServerName + 'Reason: ' + e.message;&#13;
	}&#13;
} finally {&#13;
	var statusDescription = '';&#13;
	//if error occured then log the error in the import table&#13;
	if(errorOccured) {&#13;
		statusDescription = errorMessage;&#13;
	} else {&#13;
		statusDescription = certificateCount + ' Certificates Were Successfully Syncronized for Certificate Store. Inserts: ' + insertCount + ' Updates: ' + updateCount + ' Ignored: ' + ignoreCount;&#13;
	}&#13;
	var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
	&#13;
	importLogRecord.addQuery('sys_id', '=', workflow.scratchpad.currentLogRecord);&#13;
	importLogRecord.query();&#13;
	&#13;
	while (importLogRecord.next()) {&#13;
		importLogRecord.u_status = processStatus;&#13;
		importLogRecord.u_status_description = statusDescription;&#13;
		importLogRecord.update();&#13;
	}&#13;
}&#13;
&#13;
&#13;
function compareValues(datasetValue,jsonValue, compareWhat, debugOutput) {&#13;
	var valuesMatch = false;&#13;
	var value1 = "";&#13;
	var value2 = "";&#13;
&#13;
	&#13;
	value1 = String(datasetValue).trim();&#13;
	value2 = String(jsonValue).trim();&#13;
	&#13;
	if(value1 == value2) {&#13;
		valuesMatch = true;&#13;
	}&#13;
	&#13;
	if(debugOutput &amp;&amp; !valuesMatch ) {&#13;
		workflow.info('Compare ' + compareWhat + ' - ' + value1 + ' didnt match ' + value2);&#13;
	}&#13;
	&#13;
	return valuesMatch;&#13;
	&#13;
}</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <sys_variable_value action="INSERT_OR_UPDATE">
        <document>wf_activity</document>
        <document_key>1f7616231b78fcd0e314c955624bcb77</document_key>
        <order>1</order>
        <sys_class_name>sys_variable_value</sys_class_name>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>9f7616231b78fcd0e314c955624bcb77</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:20:35</sys_updated_on>
        <value>var errorMessage = '';&#13;
var errorOccured = false;&#13;
var processStatus = 'Success';&#13;
var certificateCount = 0;&#13;
var updateCount = 0;&#13;
var insertCount = 0;&#13;
var ignoreCount = 0;&#13;
var doUpdate = false;&#13;
var expiresDiff = new GlideDuration();&#13;
var debugOutput = false;&#13;
&#13;
&#13;
try {&#13;
	var jsonData = data.get(13).certificates;&#13;
	&#13;
// 	var parser = new global.JSONParser();&#13;
&#13;
// 	var parsedData = parser.parse(jsonData);&#13;
	&#13;
	var parsedData = JSON.parse(jsonData);&#13;
	&#13;
	// workflow.scratchpad.userdata = JSON.stringify(parsedData);&#13;
	&#13;
	var certificates = parsedData.certificates;&#13;
	certificateCount = certificates.length;&#13;
	&#13;
	if(debugOutput) {&#13;
		workflow.info(certificates.length);&#13;
	}&#13;
	&#13;
	&#13;
	for (i=0;i &lt; certificates.length;i++){&#13;
		&#13;
		var certificateExpirationEpochDate = (certificates[i]['Certificate Expiration Date']).replace('/Date(','').replace(')/','');&#13;
		var certificateEffectiveEpochDate = (certificates[i]['Certificate Effective Date']).replace('/Date(','').replace(')/','');&#13;
		&#13;
		var gExpirationDate = new GlideDateTime();&#13;
		gExpirationDate.subtract(gExpirationDate.getNumericValue());&#13;
		gExpirationDate.add(certificateExpirationEpochDate);&#13;
		&#13;
		var gEffectiveDate = new GlideDateTime();&#13;
		gEffectiveDate.subtract(gEffectiveDate.getNumericValue());&#13;
		gEffectiveDate.add(certificateEffectiveEpochDate);&#13;
		&#13;
		&#13;
		var certificateRecord = new GlideRecord('x_unugr_certificat_digital_certificate');&#13;
		certificateRecord.addQuery('u_store_location','=',workflow.scratchpad.currentServerSysID);&#13;
		certificateRecord.addQuery('u_serial_number','=',certificates[i]['Serial Number']);&#13;
		&#13;
		certificateRecord.query();&#13;
		&#13;
		if(!certificateRecord.next()){&#13;
			certificateRecord.initialize();&#13;
			certificateRecord.u_store_location = workflow.scratchpad.currentServerSysID;&#13;
			certificateRecord.u_issuer = workflow.scratchpad.currentAuthorityName;&#13;
			certificateRecord.u_certificate = certificates[i]['Binary Certificate'];&#13;
			certificateRecord.u_common_name = certificates[i]['Issued Common Name'];&#13;
			certificateRecord.u_expires = gExpirationDate;&#13;
			certificateRecord.u_certificate_template = certificates[i]['CertificateTemplateName'];&#13;
			certificateRecord.u_sans = certificates[i]['DNSSubjectAlternativeNames'];&#13;
			certificateRecord.u_serial_number = certificates[i]['Serial Number'];&#13;
			certificateRecord.u_certificate_effective_date = gEffectiveDate;&#13;
			certificateRecord.u_requester_name = certificates[i]['Requester Name'];&#13;
			certificateRecord.u_subject = certificates[i]['Subject'];&#13;
			certificateRecord.u_signature_algorithm = certificates[i]['SignatureAlgorithm'];&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.DEV.UPC'){&#13;
				certificateRecord.u_environment = 'DEV';&#13;
			}&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.ACPT.UPC'){&#13;
				certificateRecord.u_environment = 'UAT';&#13;
			}			&#13;
			if(workflow.scratchpad.currentServerDomain == 'UP.CORP.UPC'){&#13;
				certificateRecord.u_environment = 'PRODUCTION';&#13;
			}	&#13;
			certificateRecord.insert();&#13;
			&#13;
			insertCount += 1;&#13;
		} else {&#13;
			if(!compareValues(certificateRecord.u_certificate,certificates[i]['Binary Certificate'],'Binary Certificate',debugOutput)) {&#13;
				certificateRecord.u_certificate = certificates[i]['Binary Certificate'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_sans,certificates[i]['DNSSubjectAlternativeNames'],'Sans',debugOutput)) {&#13;
				certificateRecord.u_sans = certificates[i]['DNSSubjectAlternativeNames'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_expires.getDisplayValue(),gExpirationDate.getDisplayValue(),'Expires',debugOutput)) {&#13;
				certificateRecord.u_expires.setDisplayValue(gExpirationDate.getDisplayValue());&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_certificate_template,certificates[i]['CertificateTemplateName'],'Certificate Template',debugOutput)) {&#13;
				certificateRecord.u_certificate_template = certificates[i]['CertificateTemplateName'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_certificate_effective_date.getDisplayValue(), gEffectiveDate.getDisplayValue(),'Effective Date',debugOutput)) {&#13;
				certificateRecord.u_certificate_effective_date.setDisplayValue(gEffectiveDate.getDisplayValue());&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_issuer,workflow.scratchpad.currentAuthorityName,'Issuer',debugOutput)){&#13;
				certificateRecord.u_issuer = workflow.scratchpad.currentAuthorityName;&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_requester_name,certificates[i]['Requester Name'],'Requester Name',debugOutput)){&#13;
				certificateRecord.u_requester_name = certificates[i]['Requester Name'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_subject,certificates[i]['Subject'],'Subject',debugOutput)){&#13;
				certificateRecord.u_subject = certificates[i]['Subject'];&#13;
				doUpdate = true;&#13;
			}&#13;
			if(!compareValues(certificateRecord.u_signature_algorithm,certificates[i]['SignatureAlgorithm'],'SignatureAlgorithm',debugOutput)){&#13;
				certificateRecord.u_signature_algorithm = certificates[i]['SignatureAlgorithm'];&#13;
				doUpdate = true;&#13;
			}&#13;
&#13;
			if(doUpdate){&#13;
				certificateRecord.update();&#13;
				doUpdate = false;&#13;
				updateCount += 1;&#13;
			} else {&#13;
				ignoreCount += 1;&#13;
			}&#13;
		}&#13;
		&#13;
	}&#13;
} catch(e) {&#13;
	errorOccured = true;&#13;
	processStatus = 'Failure';&#13;
	if(/null/.test(e.message)){//Error Message is null&#13;
		errorMessage = 'Error Occured while parsing certificate data for ' + workflow.scratchpad.currentServerName;&#13;
		&#13;
	} else {&#13;
		errorMessage = 'Error Occured while parsing certificate data for ' + workflow.scratchpad.currentServerName + 'Reason: ' + e.message;&#13;
	}&#13;
} finally {&#13;
	var statusDescription = '';&#13;
	//if error occured then log the error in the import table&#13;
	if(errorOccured) {&#13;
		statusDescription = errorMessage;&#13;
	} else {&#13;
		statusDescription = certificateCount + ' Certificates Were Successfully Syncronized for Certificate Store. Inserts: ' + insertCount + ' Updates: ' + updateCount + ' Ignored: ' + ignoreCount;&#13;
	}&#13;
	var importLogRecord = new GlideRecord('x_unugr_certificat_importlog');&#13;
	&#13;
	importLogRecord.addQuery('sys_id', '=', workflow.scratchpad.currentLogRecord);&#13;
	importLogRecord.query();&#13;
	&#13;
	while (importLogRecord.next()) {&#13;
		importLogRecord.u_status = processStatus;&#13;
		importLogRecord.u_status_description = statusDescription;&#13;
		importLogRecord.update();&#13;
	}&#13;
}&#13;
&#13;
&#13;
function compareValues(datasetValue,jsonValue, compareWhat, debugOutput) {&#13;
	var valuesMatch = false;&#13;
	var value1 = "";&#13;
	var value2 = "";&#13;
&#13;
	&#13;
	value1 = String(datasetValue).trim();&#13;
	value2 = String(jsonValue).trim();&#13;
	&#13;
	if(value1 == value2) {&#13;
		valuesMatch = true;&#13;
	}&#13;
	&#13;
	if(debugOutput &amp;&amp; !valuesMatch ) {&#13;
		workflow.info('Compare ' + compareWhat + ' - ' + value1 + ' didnt match ' + value2);&#13;
	}&#13;
	&#13;
	return valuesMatch;&#13;
	&#13;
}</value>
        <variable display_value="Script">c35ddef20a0a0ba96248a7090eccd518</variable>
    </sys_variable_value>
    <wf_condition action="INSERT_OR_UPDATE">
        <activity display_value="Synchronize Certificates to Certificate Table">1f7616231b78fcd0e314c955624bcb77</activity>
        <condition>true</condition>
        <condition_default/>
        <condition_type>standard</condition_type>
        <else_flag>false</else_flag>
        <error>false</error>
        <event>false</event>
        <event_name/>
        <is_positive>true</is_positive>
        <name>Always</name>
        <order>0</order>
        <short_description/>
        <skip_during_generate>false</skip_during_generate>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d77616231b78fcd0e314c955624bcb78</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
    </wf_condition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Success">577616231b78fcd0e314c955624bcb77</condition>
        <from display_value="get Certificates from Certificate Store">177616231b78fcd0e314c955624bcb76</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>537696231b78fcd0e314c955624bcbd6</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Synchronize Certificates to Certificate Table">1f7616231b78fcd0e314c955624bcb77</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Yes">5b7696231b78fcd0e314c955624bcbd1</condition>
        <from display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>5b7696231b78fcd0e314c955624bcbd5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Log Import and Assign Current Vars">5f7616231b78fcd0e314c955624bcb73</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">df7696231b78fcd0e314c955624bcbd2</condition>
        <from display_value="Begin">537696231b78fcd0e314c955624bcbd2</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>5f7696231b78fcd0e314c955624bcbd5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Initialize WorkFlow">df7696231b78fcd0e314c955624bcbce</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">9b7616231b78fcd0e314c955624bcb75</condition>
        <from display_value="Log Message">df7616231b78fcd0e314c955624bcb74</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>977696231b78fcd0e314c955624bcbd4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="End">5f7696231b78fcd0e314c955624bcbcd</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">d77616231b78fcd0e314c955624bcb78</condition>
        <from display_value="Synchronize Certificates to Certificate Table">1f7616231b78fcd0e314c955624bcb77</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d37696231b78fcd0e314c955624bcbd5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Failure">d37616231b78fcd0e314c955624bcb77</condition>
        <from display_value="get Certificates from Certificate Store">177616231b78fcd0e314c955624bcb76</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d37696231b78fcd0e314c955624bcbd6</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Log Failure">977616231b78fcd0e314c955624bcb71</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="No">db7696231b78fcd0e314c955624bcbd1</condition>
        <from display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d77696231b78fcd0e314c955624bcbd5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Log Message">df7616231b78fcd0e314c955624bcb74</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">1b7616231b78fcd0e314c955624bcb74</condition>
        <from display_value="Log Import and Assign Current Vars">5f7616231b78fcd0e314c955624bcb73</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>d77696231b78fcd0e314c955624bcbd6</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="get Certificates from Certificate Store">177616231b78fcd0e314c955624bcb76</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">9b7696231b78fcd0e314c955624bcbcf</condition>
        <from display_value="Initialize WorkFlow">df7696231b78fcd0e314c955624bcbce</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>db7696231b78fcd0e314c955624bcbd4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Log Import and Assign Current Vars">5f7616231b78fcd0e314c955624bcb73</to>
    </wf_transition>
    <wf_transition action="INSERT_OR_UPDATE">
        <condition display_value="Always">937616231b78fcd0e314c955624bcb73</condition>
        <from display_value="Log Failure">977616231b78fcd0e314c955624bcb71</from>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:14</sys_created_on>
        <sys_id>df7696231b78fcd0e314c955624bcbd4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:14</sys_updated_on>
        <to display_value="Check Counter Value">937696231b78fcd0e314c955624bcbd0</to>
    </wf_transition>
    <wf_estimated_runtime_config action="INSERT_OR_UPDATE">
        <estimated_run_time/>
        <no_of_data_points>1</no_of_data_points>
        <percentage_threshold_ert>20</percentage_threshold_ert>
        <sys_created_by>CHF03</sys_created_by>
        <sys_created_on>2021-06-23 14:15:13</sys_created_on>
        <sys_id>df7616231b78fcd0e314c955624bcb6e</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>CHF03</sys_updated_by>
        <sys_updated_on>2021-06-23 14:15:13</sys_updated_on>
        <workflow_version display_value="14 Hours">5b7616231b78fcd0e314c955624bcb6e</workflow_version>
    </wf_estimated_runtime_config>
    <wf_workflow_version action="update_multiple" query="workflow=7c1b10aedb587b00d3e954f948961938^sys_id!=5b7616231b78fcd0e314c955624bcb6e">
        <published>false</published>
    </wf_workflow_version>
</record_update>
